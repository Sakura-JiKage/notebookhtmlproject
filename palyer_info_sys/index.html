<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英雄联盟职业选手资料库</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome 图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-attachment: fixed;
            padding: 20px;
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .card {
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            background: white;
            margin-bottom: 25px;
        }
        
        .card-content {
            display: flex;
            padding: 20px;
        }
        
        .player-img-container {
            flex-shrink: 0;
            margin-right: 20px;
            position: relative;
        }
        
        .player-img {
            width: 180px;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .status-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }
        
        .player-info {
            flex-grow: 1;
        }
        
        .player-name {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.8rem;
        }
        
        .team-badge {
            display: inline-block;
            background-color: #e9ecef;
            padding: 4px 10px;
            border-radius: 20px;
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }
        
        .honor-item {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            margin-right: 8px;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }
        
        .loading {
            text-align: center;
            color: white;
            padding: 50px;
        }
        
        .error {
            text-align: center;
            color: #e74c3c;
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .player-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .player-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .player-card:hover {
            transform: translateY(-5px);
        }
        
        .player-card-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .player-card-content {
            padding: 15px;
        }
        
        .player-card-name {
            font-weight: 700;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .player-card-position {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .player-card-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .card-content {
                flex-direction: column;
            }
            
            .player-img-container {
                margin-right: 0;
                margin-bottom: 20px;
                text-align: center;
            }
            
            .player-img {
                width: 150px;
                height: 180px;
            }
            
            .player-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>英雄联盟职业选手资料库</h1>
            <p>点击下方选手卡片查看详细信息，或通过URL参数查看特定选手</p>
        </div>
        
        <div id="content">
            <!-- 内容将在这里动态加载 -->
        </div>
    </div>

    <script>
        // 示例选手数据
        const samplePlayers = [
            {
                "gameId": "Uzi",
                "realName": "简自豪",
                "birthDate": "1997-04-05",
                "position": "ADC",
                "status": "active",
                "regions": ["LPL"],
                "firstMatch": "2013-01-01",
                "retirementDate": null,
                "teams": ["Royal Club", "OMG", "QG", "RNG", "BLG"],
                "honors": ["2018年亚运会金牌", "2018年MSI冠军", "LPL春季赛冠军", "LPL夏季赛冠军"],
                "image": "https://images.unsplash.com/photo-1614689540268-6bc59e5f3ce5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
            },
            {
                "gameId": "Clearlove",
                "realName": "明凯",
                "birthDate": "1993-07-25",
                "position": "Jungle",
                "status": "retired",
                "regions": ["LPL"],
                "firstMatch": "2012-01-01",
                "retirementDate": "2019-12-16",
                "teams": ["Team WE", "EDG"],
                "honors": ["2015年MSI冠军", "LPL春季赛冠军", "LPL夏季赛冠军"],
                "image": "https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
            },
            {
                "gameId": "Faker",
                "realName": "李相赫",
                "birthDate": "1996-05-07",
                "position": "Mid",
                "status": "active",
                "regions": ["LCK"],
                "firstMatch": "2013-01-01",
                "retirementDate": null,
                "teams": ["SKT T1", "T1"],
                "honors": ["三届世界赛冠军", "两届MSI冠军", "十届LCK冠军"],
                "image": "https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
            },
            {
                "gameId": "Rookie",
                "realName": "宋义进",
                "birthDate": "1997-03-11",
                "position": "Mid",
                "status": "active",
                "regions": ["LPL"],
                "firstMatch": "2014-01-01",
                "retirementDate": null,
                "teams": ["KT Rolster", "IG", "V5"],
                "honors": ["2018年世界赛冠军", "LPL春季赛冠军", "LPL夏季赛冠军"],
                "image": "https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80"
            }
        ];

        // 页面加载时检查URL参数
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const playerId = urlParams.get('player');
            
            if (playerId) {
                loadPlayerData(playerId);
            } else {
                showPlayerList();
            }
        });

        // 显示选手列表
        function showPlayerList() {
            let playerCards = '';
            
            samplePlayers.forEach(player => {
                const isRetired = player.retirementDate !== null && player.retirementDate !== undefined;
                const status = isRetired ? '退役' : '现役';
                const statusClass = isRetired ? 'bg-danger' : 'bg-success';
                
                playerCards += `
                    <div class="player-card" onclick="loadPlayerData('${player.gameId}')">
                        <img src="${player.image}" class="player-card-img" alt="${player.gameId}">
                        <div class="player-card-content">
                            <div class="player-card-name">${player.gameId}</div>
                            <div class="player-card-position">${player.position} · ${player.regions.join(', ')}</div>
                            <span class="player-card-status ${statusClass}">${status}</span>
                            <div style="font-size: 0.85rem; color: #7f8c8d;">${player.realName}</div>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('content').innerHTML = `
                <div>
                    <h2 style="color: white; text-align: center;">选择选手查看详细信息</h2>
                    <div class="player-list">
                        ${playerCards}
                    </div>
                </div>
            `;
        }

        // 加载选手数据
        async function loadPlayerData(playerId) {
            showLoading();
            
            try {
                // 在实际应用中，这里应该从服务器获取数据
                // 这里我们使用示例数据
                const playerData = samplePlayers.find(player => player.gameId.toLowerCase() === playerId.toLowerCase());
                
                if (!playerData) {
                    throw new Error(`选手 ${playerId} 未找到`);
                }
                
                displayPlayer(playerData);
                
            } catch (error) {
                showError(`无法加载选手数据: ${error.message}<br>
                          请确保选手ID正确`);
            }
        }

        // 显示加载中
        function showLoading() {
            document.getElementById('content').innerHTML = `
                <div class="loading">
                    <div class="spinner-border text-light" role="status">
                        <span class="visually-hidden">加载中...</span>
                    </div>
                    <p class="mt-2">正在加载选手数据...</p>
                </div>
            `;
        }

        // 显示错误信息
        function showError(message) {
            document.getElementById('content').innerHTML = `
                <div class="error">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h4>加载失败</h4>
                    <div>${message}</div>
                    <button class="btn btn-primary mt-3" onclick="showPlayerList()">返回选手列表</button>
                </div>
            `;
        }

        // 显示选手信息
        function displayPlayer(playerData) {
            // 确定选手状态和职业生涯年限
            const isRetired = playerData.retirementDate !== null && playerData.retirementDate !== undefined;
            const status = isRetired ? '退役' : '现役';
            const statusClass = isRetired ? 'bg-danger' : 'bg-success';
            
            // 计算职业生涯年限
            const firstMatchYear = new Date(playerData.firstMatch);
            let careerYears;
            
            if (isRetired) {
                const retirementDate = new Date(playerData.retirementDate);
                careerYears = retirementDate.getFullYear() - firstMatchYear.getFullYear();
                // 精确到月份
                const monthDiff = retirementDate.getMonth() - firstMatchYear.getMonth();
                if (monthDiff < 0 || (monthDiff === 0 && retirementDate.getDate() < firstMatchYear.getDate())) {
                    careerYears--;
                }
            } else {
                const currentYear = new Date().getFullYear();
                careerYears = currentYear - firstMatchYear.getFullYear();
                // 精确到月份
                const monthDiff = new Date().getMonth() - firstMatchYear.getMonth();
                if (monthDiff < 0 || (monthDiff === 0 && new Date().getDate() < firstMatchYear.getDate())) {
                    careerYears--;
                }
            }

            const teams = playerData.teams.map(team => 
                `<span class="team-badge">${team}</span>`
            ).join('');
            
            const honors = playerData.honors ? playerData.honors.map(honor => 
                `<span class="honor-item">${honor}</span>`
            ).join('') : '暂无荣誉信息';
            
            // 计算年龄
            const birthDate = new Date(playerData.birthDate);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            // 如果生日还没到，年龄减1
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }

            // 构建信息网格
            let infoGrid = `
                <div>
                    <div style="font-size: 0.85rem; color: #7f8c8d;">出生日期</div>
                    <div style="font-weight: 600;">${formatDate(playerData.birthDate)}</div>
                </div>
                <div>
                    <div style="font-size: 0.85rem; color: #7f8c8d;">年龄</div>
                    <div style="font-weight: 600;">${age}岁</div>
                </div>
                <div>
                    <div style="font-size: 0.85rem; color: #7f8c8d;">首场职业比赛</div>
                    <div style="font-weight: 600;">${formatDate(playerData.firstMatch)}</div>
                </div>
                <div>
                    <div style="font-size: 0.85rem; color: #7f8c8d;">职业生涯</div>
                    <div style="font-weight: 600;">${careerYears}年</div>
                </div>
            `;

            // 如果是退役选手，添加退役时间信息
            if (isRetired) {
                infoGrid += `
                    <div style="grid-column: span 2;">
                        <div style="font-size: 0.85rem; color: #7f8c8d;">退役时间</div>
                        <div style="font-weight: 600;">${formatDate(playerData.retirementDate)}</div>
                    </div>
                `;
            }

            document.getElementById('content').innerHTML = `
                <div class="row justify-content-center">
                    <div class="col-lg-10">
                        <div class="card">
                            <div class="card-content">
                                <div class="player-img-container">
                                    <img src="${playerData.image}"
                                         class="player-img" alt="${playerData.gameId}">
                                    <span class="status-badge ${statusClass}">
                                        ${status}
                                    </span>
                                </div>
                                <div class="player-info">
                                    <h2 class="player-name">${playerData.gameId}</h2>
                                    <div style="color: #7f8c8d; margin-bottom: 15px;">${playerData.realName}</div>
                                    
                                    <div style="margin-bottom: 20px;">
                                        <span class="team-badge">${playerData.position}</span>
                                        ${playerData.regions.map(region => 
                                            `<span class="team-badge" style="background: #3498db; color: white;">${region}</span>`
                                        ).join('')}
                                    </div>
                                    
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                        ${infoGrid}
                                        
                                        <div style="grid-column: span 2;">
                                            <div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 8px;">效力过的俱乐部</div>
                                            <div>${teams}</div>
                                        </div>
                                        
                                        <div style="grid-column: span 2;">
                                            <div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 8px;">主要荣誉</div>
                                            <div>${honors}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <button class="btn btn-light" onclick="showPlayerList()">
                                <i class="fas fa-arrow-left"></i> 返回选手列表
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // 格式化日期
        function formatDate(dateString) {
            try {
                const date = new Date(dateString);
                return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
            } catch (e) {
                return dateString;
            }
        }
    </script>
</body>
</html>