<script>
    // ... 其他代码保持不变 ...

    // 显示选手信息
    function displayPlayer(playerData) {
        // 确定选手状态和职业生涯年限
        const isRetired = playerData.retirementDate !== null && playerData.retirementDate !== undefined;
        const status = isRetired ? '退役' : '现役';
        const statusClass = isRetired ? 'bg-danger' : 'bg-success';
        
        // 计算职业生涯年限
        const firstMatchYear = new Date(playerData.firstMatch);
        let careerYears;
        
        if (isRetired) {
            const retirementDate = new Date(playerData.retirementDate);
            careerYears = retirementDate.getFullYear() - firstMatchYear.getFullYear();
            // 精确到月份
            const monthDiff = retirementDate.getMonth() - firstMatchYear.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && retirementDate.getDate() < firstMatchYear.getDate())) {
                careerYears--;
            }
        } else {
            const currentYear = new Date().getFullYear();
            careerYears = currentYear - firstMatchYear.getFullYear();
            // 精确到月份
            const monthDiff = new Date().getMonth() - firstMatchYear.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && new Date().getDate() < firstMatchYear.getDate())) {
                careerYears--;
            }
        }

        const teams = playerData.teams.map(team => 
            `<span class="team-badge">${team}</span>`
        ).join('');
        
        const honors = playerData.honors ? playerData.honors.map(honor => 
            `<span class="honor-item">${honor}</span>`
        ).join('') : '暂无荣誉信息';
        
        // 计算年龄
        const birthDate = new Date(playerData.birthDate);
        const today = new Date();
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        
        // 如果生日还没到，年龄减1
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }

        // 构建信息网格
        let infoGrid = `
            <div>
                <div style="font-size: 0.85rem; color: #7f8c8d;">出生日期</div>
                <div style="font-weight: 600;">${formatDate(playerData.birthDate)}</div>
            </div>
            <div>
                <div style="font-size: 0.85rem; color: #7f8c8d;">年龄</div>
                <div style="font-weight: 600;">${age}岁</div>
            </div>
            <div>
                <div style="font-size: 0.85rem; color: #7f8c8d;">首场职业比赛</div>
                <div style="font-weight: 600;">${formatDate(playerData.firstMatch)}</div>
            </div>
            <div>
                <div style="font-size: 0.85rem; color: #7f8c8d;">职业生涯</div>
                <div style="font-weight: 600;">${careerYears}年</div>
            </div>
        `;

        // 如果是退役选手，添加退役时间信息
        if (isRetired) {
            infoGrid += `
                <div style="grid-column: span 2;">
                    <div style="font-size: 0.85rem; color: #7f8c8d;">退役时间</div>
                    <div style="font-weight: 600;">${formatDate(playerData.retirementDate)}</div>
                </div>
            `;
        }

        document.getElementById('content').innerHTML = `
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card">
                        <div class="card-content">
                            <div class="player-img-container">
                                <img src="${playerData.image}"
                                     class="player-img" alt="${playerData.gameId}">
                                <span class="status-badge ${statusClass}">
                                    ${status}
                                </span>
                            </div>
                            <div class="player-info">
                                <h2 class="player-name">${playerData.gameId}</h2>
                                <div style="color: #7f8c8d; margin-bottom: 15px;">${playerData.realName}</div>
                                
                                <div style="margin-bottom: 20px;">
                                    <span class="team-badge">${playerData.position}</span>
                                    ${playerData.regions.map(region => 
                                        `<span class="team-badge" style="background: #3498db; color: white;">${region}</span>`
                                    ).join('')}
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    ${infoGrid}
                                    
                                    <div style="grid-column: span 2;">
                                        <div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 8px;">效力过的俱乐部</div>
                                        <div>${teams}</div>
                                    </div>
                                    
                                    <div style="grid-column: span 2;">
                                        <div style="font-size: 0.9rem; color: #7f8c8d; margin-bottom: 8px;">主要荣誉</div>
                                        <div>${honors}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // ... formatDate函数保持不变 ...
</script>